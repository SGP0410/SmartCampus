Index: app/src/main/res/layout/fragment_getajob.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:orientation=\"vertical\"\r\n    android:background=\"@color/color_background\">\r\n\r\n  <include layout=\"@layout/title_back_g\"/>\r\n\r\n\r\n       <androidx.swiperefreshlayout.widget.SwipeRefreshLayout\r\n           android:layout_width=\"match_parent\"\r\n           android:layout_height=\"match_parent\"\r\n           android:id=\"@+id/swipe\">\r\n           <androidx.coordinatorlayout.widget.CoordinatorLayout\r\n               android:layout_width=\"match_parent\"\r\n\r\n               android:layout_height=\"match_parent\">\r\n               <com.google.android.material.appbar.AppBarLayout\r\n                   android:layout_width=\"match_parent\"\r\n                   android:background=\"#ffffff\"\r\n                   android:layout_height=\"wrap_content\"\r\n                   android:id=\"@+id/appbar_layout\"\r\n                   app:elevation=\"0dp\"\r\n                   >\r\n                   <com.google.android.material.appbar.CollapsingToolbarLayout\r\n                       android:layout_width=\"match_parent\"\r\n                       android:layout_height=\"match_parent\"\r\n                       app:layout_scrollFlags=\"scroll|exitUntilCollapsed\">\r\n                       <LinearLayout\r\n                           android:layout_width=\"match_parent\"\r\n                           android:layout_height=\"wrap_content\"\r\n                           app:layout_collapseMode=\"parallax\"\r\n                           app:layout_collapseParallaxMultiplier=\"0.5\"\r\n                           android:orientation=\"vertical\">\r\n                           <Button\r\n                               android:layout_width=\"match_parent\"\r\n                               android:layout_height=\"wrap_content\"\r\n                               android:id=\"@+id/btn_change\"\r\n                               android:text=\"\"/>\r\n                           <com.wxy.chinamapview.view.ChinaMapView\r\n                               android:layout_width=\"match_parent\"\r\n                               android:layout_height=\"wrap_content\"\r\n                               android:id=\"@+id/chinamap_view\"\r\n                               />\r\n                           <com.example.smartcampus.view.ColorView\r\n                               android:layout_width=\"match_parent\"\r\n                               android:layout_height=\"33dp\"\r\n                               android:id=\"@+id/color_view\"></com.example.smartcampus.view.ColorView>\r\n\r\n                       </LinearLayout>\r\n                   </com.google.android.material.appbar.CollapsingToolbarLayout>\r\n                   <LinearLayout\r\n                       android:layout_width=\"match_parent\"\r\n                       android:layout_height=\"30dp\"\r\n                       android:background=\"#20000000\"\r\n                       android:padding=\"2dp\"\r\n                       app:layout_collapseMode=\"pin\"\r\n                       android:orientation=\"horizontal\">\r\n                       <TextView\r\n                           android:layout_width=\"0dp\"\r\n                           android:layout_height=\"match_parent\"\r\n                           android:gravity=\"center\"\r\n                           android:layout_weight=\"0.8\"/>\r\n\r\n                       <TextView\r\n                           android:layout_width=\"0dp\"\r\n                           android:layout_height=\"match_parent\"\r\n                           android:text=\"就业地势统计\"\r\n                           android:textSize=\"12sp\"\r\n                           android:textColor=\"#000000\"\r\n                           android:gravity=\"center\"\r\n                           android:layout_weight=\"1\"/>\r\n                   </LinearLayout>\r\n               </com.google.android.material.appbar.AppBarLayout>\r\n               <androidx.recyclerview.widget.RecyclerView\r\n                   android:layout_width=\"match_parent\"\r\n                   android:id=\"@+id/recycle\"\r\n                   app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\r\n                   android:layout_height=\"match_parent\">\r\n\r\n               </androidx.recyclerview.widget.RecyclerView>\r\n           </androidx.coordinatorlayout.widget.CoordinatorLayout>\r\n\r\n       </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>\r\n\r\n       <com.github.mikephil.charting.charts.PieChart\r\n         android:layout_width=\"match_parent\"\r\n         android:layout_height=\"400dp\"\r\n         android:id=\"@+id/chart1\"/>\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_getajob.xml	(revision 14ad90597f23d76bf08b2a153622a9d9a82d7123)
+++ app/src/main/res/layout/fragment_getajob.xml	(date 1624848470460)
@@ -8,7 +8,11 @@
 
   <include layout="@layout/title_back_g"/>
 
-
+    <Button
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:id="@+id/btn_change"
+        android:text=""/>
        <androidx.swiperefreshlayout.widget.SwipeRefreshLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
@@ -17,6 +21,7 @@
                android:layout_width="match_parent"
 
                android:layout_height="match_parent">
+
                <com.google.android.material.appbar.AppBarLayout
                    android:layout_width="match_parent"
                    android:background="#ffffff"
@@ -34,11 +39,7 @@
                            app:layout_collapseMode="parallax"
                            app:layout_collapseParallaxMultiplier="0.5"
                            android:orientation="vertical">
-                           <Button
-                               android:layout_width="match_parent"
-                               android:layout_height="wrap_content"
-                               android:id="@+id/btn_change"
-                               android:text=""/>
+
                            <com.wxy.chinamapview.view.ChinaMapView
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
@@ -62,12 +63,14 @@
                            android:layout_width="0dp"
                            android:layout_height="match_parent"
                            android:gravity="center"
+                           android:text="省份"
+                           android:textColor="#000"
                            android:layout_weight="0.8"/>
 
                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="match_parent"
-                           android:text="就业地势统计"
+                           android:text="就业地市统计"
                            android:textSize="12sp"
                            android:textColor="#000000"
                            android:gravity="center"
@@ -84,10 +87,36 @@
            </androidx.coordinatorlayout.widget.CoordinatorLayout>
 
        </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>
+     <ScrollView
+         android:layout_width="match_parent"
+         android:layout_height="wrap_content">
+         <LinearLayout
+             android:layout_width="match_parent"
+             android:layout_height="wrap_content"
+             android:orientation="vertical">
+
 
-       <com.github.mikephil.charting.charts.PieChart
-         android:layout_width="match_parent"
-         android:layout_height="400dp"
-         android:id="@+id/chart1"/>
+             <com.github.mikephil.charting.charts.PieChart
+                 android:layout_width="match_parent"
+                 android:layout_height="350dp"
+                 android:id="@+id/chart1"/>
+
+             <com.github.mikephil.charting.charts.LineChart
+                 android:layout_width="match_parent"
+                 android:layout_height="400dp"
+                 android:layout_weight="1"
+                 android:id="@+id/chart2"/>
+
+             <com.github.mikephil.charting.charts.BarChart
+                 android:layout_width="match_parent"
+                 android:layout_height="400dp"
+                 android:id="@+id/chart3"/>
+             <com.github.mikephil.charting.charts.BarChart
+                 android:layout_width="match_parent"
+                 android:layout_height="400dp"
+                 android:id="@+id/chart4"/>
+
+         </LinearLayout>
+     </ScrollView>
 
 </LinearLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/smartcampus/fragment/statisticsFragment/Fragment_getAJob1.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.smartcampus.fragment.statisticsFragment;\r\n\r\nimport android.graphics.Color;\r\nimport android.graphics.Typeface;\r\nimport android.os.Handler;\r\nimport android.text.SpannableString;\r\nimport android.text.style.RelativeSizeSpan;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.smartcampus.R;\r\nimport com.example.smartcampus.adapter.ProvinceAdapter;\r\nimport com.example.smartcampus.bean.statistics.GetMunicipalqueryall;\r\nimport com.example.smartcampus.bean.statistics.GetStudentqueryall;\r\nimport com.example.smartcampus.bean.statistics.GetWorkNatureNamequeryall;\r\nimport com.example.smartcampus.bean.statistics.Province;\r\nimport com.example.smartcampus.bean.statistics.Provincequeryall;\r\nimport com.example.smartcampus.listener.AppBarLayoutStateChangeListener;\r\nimport com.example.smartcampus.model.MycolorArea;\r\nimport com.example.smartcampus.util.ColorChangeUtil;\r\nimport com.example.smartcampus.view.ColorView;\r\nimport com.example.smartcampuslibrary.fragment.BaseFragment;\r\nimport com.example.smartcampuslibrary.net.OkHttpLo;\r\nimport com.example.smartcampuslibrary.net.OkHttpTo;\r\nimport com.github.mikephil.charting.charts.PieChart;\r\nimport com.github.mikephil.charting.components.Legend;\r\nimport com.github.mikephil.charting.data.Entry;\r\nimport com.github.mikephil.charting.data.PieData;\r\nimport com.github.mikephil.charting.data.PieDataSet;\r\nimport com.github.mikephil.charting.data.PieEntry;\r\nimport com.github.mikephil.charting.formatter.PercentFormatter;\r\nimport com.github.mikephil.charting.highlight.Highlight;\r\nimport com.github.mikephil.charting.listener.OnChartValueSelectedListener;\r\nimport com.github.mikephil.charting.utils.ColorTemplate;\r\nimport com.google.android.material.appbar.AppBarLayout;\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.reflect.TypeToken;\r\nimport com.wxy.chinamapview.model.ChinaMapModel;\r\nimport com.wxy.chinamapview.model.ProvinceModel;\r\nimport com.wxy.chinamapview.view.ChinaMapView;\r\n\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.swiperefreshlayout.widget.SwipeRefreshLayout;\r\n\r\nimport static com.example.smartcampus.listener.AppBarLayoutStateChangeListener.State.EXPANDED;\r\n\r\npublic class Fragment_getAJob1 extends BaseFragment implements OnChartValueSelectedListener {\r\n    private ImageView back;\r\n    private TextView title;\r\n    private PieChart chart1;\r\n    private List<GetWorkNatureNamequeryall> getWorkNatureNamequeryalls;\r\n    private List<GetStudentqueryall> getStudentqueryalls;\r\n    private Map<String, Integer> student1;\r\n\r\n\r\n    private ChinaMapModel chinaMapModel;\r\n    private HashMap<String, List<MycolorArea>> colorView_hashmap;\r\n    private int currentColor = 0;\r\n    private List<String> list;\r\n    private ProvinceAdapter adapter;\r\n    private AppBarLayoutStateChangeListener.State appbarState;\r\n\r\n    private Typeface tf;\r\n    private ChinaMapView chinamapView;\r\n    private ColorView colorView;\r\n    private RecyclerView recycle;\r\n    private SwipeRefreshLayout swipe;\r\n    private AppBarLayout appbarLayout;\r\n    private Button btnChange;\r\n\r\n    private List<Provincequeryall> provincequeryalls;//获取省\r\n    private List<GetMunicipalqueryall> getMunicipalqueryalls;//获取市\r\n    private Map<String,Float> studentadress;\r\n\r\n    @Override\r\n    protected int layoutResId() {\r\n        return R.layout.fragment_getajob;\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void initView(View view) {\r\n\r\n        back = (ImageView) view.findViewById(R.id.back);\r\n        title = (TextView) view.findViewById(R.id.title);\r\n        chart1 = (PieChart) view.findViewById(R.id.chart1);\r\n        chinamapView = (ChinaMapView) view.findViewById(R.id.chinamap_view);\r\n        colorView = (ColorView) view.findViewById(R.id.color_view);\r\n        recycle = (RecyclerView) view.findViewById(R.id.recycle);\r\n        swipe = (SwipeRefreshLayout) view.findViewById(R.id.swipe);\r\n        appbarLayout = (AppBarLayout) view.findViewById(R.id.appbar_layout);\r\n        btnChange = (Button) view.findViewById(R.id.btn_change);\r\n    }\r\n\r\n    @Override\r\n    protected void initData() {\r\n        title.setText(\"学业信息\");\r\n        provincequeryalls=new ArrayList<>();\r\n        getWorkNatureName_query_all();\r\n\r\n        //初始化map\r\n        initMap();\r\n\r\n        //初始化地图颜色\r\n        intMapColor();\r\n        initAppbarListener();\r\n        initSwipRefresh();\r\n        btnChange.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n              /*  String namestring = ColorChangeUtil.nameStrings[++currentColor % ColorChangeUtil.nameStrings.length];\r\n                btnChange.setText(namestring);\r\n                colorView.setList(colorView_hashmap.get(namestring));\r\n                //重置map各省份颜色\r\n                ColorChangeUtil.changeMapColors(chinaMapModel, namestring);\r\n                chinamapView.notifyDataChanged();*/\r\n            }\r\n        });\r\n    }\r\n    private void initSwipRefresh() {\r\n        swipe.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {\r\n            @Override\r\n            public void onRefresh() {\r\n                chinamapView.setEnableTouch(false);\r\n                //模拟耗时\r\n                new Handler().postDelayed(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        String nameString = ColorChangeUtil.nameStrings[++currentColor % ColorChangeUtil.nameStrings.length];\r\n                        btnChange.setText(nameString);\r\n                        colorView.setList(colorView_hashmap.get(nameString));\r\n                        //重置map各省份颜色\r\n                        ColorChangeUtil.changeMapColors(chinaMapModel, nameString);\r\n                        chinamapView.notifyDataChanged();\r\n                        swipe.setRefreshing(false);\r\n                        if (appbarState == EXPANDED) {\r\n                            swipe.setEnabled(true);\r\n                            chinamapView.setEnableTouch(true);\r\n\r\n                        } else {\r\n                            swipe.setEnabled(false);\r\n                            chinamapView.setEnableTouch(false);\r\n\r\n                        }\r\n                    }\r\n                }, 2000);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void initAppbarListener() {\r\n        appbarLayout.addOnOffsetChangedListener(new AppBarLayoutStateChangeListener() {\r\n            @Override\r\n            public void onStateChanged(AppBarLayout appBarLayout, State state) {\r\n                appbarState = state;\r\n                switch (state) {\r\n                    case EXPANDED:\r\n                        swipe.setEnabled(true);\r\n                        chinamapView.setEnableTouch(true);\r\n                        break;\r\n                    case COLLAPSED:\r\n                    case INTERMEDIATE:\r\n                        chinamapView.setEnableTouch(false);\r\n                        if (!swipe.isRefreshing()) {\r\n                            swipe.setEnabled(false);\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void intMapColor() {\r\n\r\n      /*  String colorStrings[] = {\"#D50D0D,#DC5754,#E98683,#F8CECF,#D3DFD5,#8DB093,#5E9361,#1C6620\"};\r\n        String textStrings[] = {\"0~0.5,0.5~1,1~1.5,1.5~2,2~2.5,2.5~3,3~3.5,3.5~\"};\r\n        for (ProvinceModel p:chinaMapModel.getProvincesList()){\r\n            for (Provincequeryall p1:provincequeryalls){\r\n             float  a= studentadress.get(p1.getProvinceName())*100;\r\n             int b=(int)((a-0)/2+1);\r\n                if (b<=0){\r\n                    b=0;\r\n                }else if (b>=textStrings[0].split(\",\").length-1){\r\n                    b=textStrings[0].split(\",\").length-1;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        }*/\r\n        btnChange.setText(\"就业地市显示\");\r\n        ColorChangeUtil.changeMapColors(chinaMapModel, ColorChangeUtil.nameStrings[currentColor]);\r\n        chinamapView.notifyDataChanged();\r\n    }\r\n    private void initRecycleView() {\r\n      /*  list = new ArrayList<>();\r\n        for (int i = 0; i < ColorChangeUtil.province_datas.length; i++) {\r\n            list.add(ColorChangeUtil.province_datas[i]);\r\n        }*/\r\n        adapter = new ProvinceAdapter(studentadress,provincequeryalls);\r\n        recycle.setLayoutManager(new LinearLayoutManager(getContext(), LinearLayoutManager.VERTICAL, false));\r\n        recycle.setAdapter(adapter);\r\n    }\r\n\r\n    /**\r\n     * 设置颜色渐变条\r\n     */\r\n    private void setColorView() {\r\n        colorView_hashmap = new HashMap<>();\r\n        for (int i = 0; i < ColorChangeUtil.nameStrings.length; i++) {\r\n            String colors[] = ColorChangeUtil.colorStrings[i].split(\",\");\r\n            String texts[] = ColorChangeUtil.textStrings[i].split(\",\");\r\n            List<MycolorArea> list = new ArrayList<>();\r\n            for (int j = 0; j < colors.length; j++) {\r\n                MycolorArea c = new MycolorArea();\r\n                c.setColor(Color.parseColor(colors[j]));\r\n                c.setText(texts[j]);\r\n                list.add(c);\r\n            }\r\n            colorView_hashmap.put(ColorChangeUtil.nameStrings[i], list);\r\n        }\r\n        colorView.setList(colorView_hashmap.get(ColorChangeUtil.nameStrings[0]));\r\n    }\r\n    private void initMap() {\r\n        chinaMapModel = chinamapView.getChinaMapModel();\r\n        //传数据\r\n        chinamapView.setScaleMax(3);\r\n        chinamapView.setScaleMin(1);\r\n        chinamapView.setOnProvinceClickLisener(new com.wxy.chinamapview.view.ChinaMapView.onProvinceClickLisener() {\r\n            @Override\r\n            public void onSelectProvince(String provinceName) {\r\n\r\n                for (int i = 0; i < provincequeryalls.size(); i++) {\r\n\r\n                    if (provincequeryalls.get(i).getProvinceName().contains(provinceName)) {\r\n                        Log.d(\"aaaaaaaax\", \"onSelectProvince: \"+provinceName+\"/\"+provincequeryalls.get(i).getProvinceName());\r\n                        Provincequeryall p = provincequeryalls.get(i);\r\n                        provincequeryalls.remove(i);\r\n                        provincequeryalls.add(0,p);\r\n                        adapter.notifyDataSetChanged();\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        chinamapView.setOnPromiseParentTouchListener(new com.wxy.chinamapview.view.ChinaMapView.onPromiseParentTouchListener() {\r\n            @Override\r\n            public void onPromiseTouch(boolean promise) {\r\n                swipe.setEnabled(promise);\r\n                banAppBarScroll(promise);\r\n                Log.v(\"xixi=\", promise + \"\");\r\n            }\r\n        });\r\n    }\r\n\r\n    private void banAppBarScroll(boolean isScroll) {\r\n        for (int i = 0; i < appbarLayout.getChildCount(); i++) {\r\n            View mAppBarChildAt = appbarLayout.getChildAt(i);\r\n            AppBarLayout.LayoutParams mAppBarParams = (AppBarLayout.LayoutParams) mAppBarChildAt.getLayoutParams();\r\n            if (isScroll) {\r\n                mAppBarParams.setScrollFlags(AppBarLayout.LayoutParams.SCROLL_FLAG_SCROLL | AppBarLayout.LayoutParams.SCROLL_FLAG_EXIT_UNTIL_COLLAPSED);\r\n                mAppBarChildAt.setLayoutParams(mAppBarParams);\r\n            } else {\r\n                mAppBarParams.setScrollFlags(0);\r\n            }\r\n        }\r\n    }\r\n\r\n    private void getStudentqueryalls() {\r\n        new OkHttpTo().setUrl(\"getStudent_query_all\")\r\n                .setRequestType(\"get\")\r\n                .setOkHttpLo(new OkHttpLo() {\r\n                    @Override\r\n                    public void onResponse(JSONObject jsonObject) {\r\n                        getStudentqueryalls = new Gson().fromJson(jsonObject.optJSONArray(\"data\").toString()\r\n                                , new TypeToken<List<GetStudentqueryall>>() {\r\n                                }.getType());\r\n                        if (getStudentqueryalls.size() != 0) {\r\n                            huoqu();\r\n                            huoqusheng();\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onFailure(IOException e) {\r\n\r\n                    }\r\n\r\n                }).start();\r\n    }\r\n\r\n    private void huoqusheng() {\r\n        new OkHttpTo().setUrl(\"province_query_all\")\r\n                .setRequestType(\"get\")\r\n                .setOkHttpLo(new OkHttpLo() {\r\n                    @Override\r\n                    public void onResponse(JSONObject jsonObject) {\r\n                        provincequeryalls.addAll(new Gson().fromJson(jsonObject.optJSONArray(\"data\").toString()\r\n                                ,new TypeToken<List<Provincequeryall>>(){}.getType()));\r\n                        if (provincequeryalls.size()!=0){\r\n                            huoqushi();\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onFailure(IOException e) {\r\n\r\n                    }\r\n                }).start();\r\n    }\r\n\r\n    private void huoqushi() {\r\n        studentadress=new HashMap<>();\r\n        new OkHttpTo().setUrl(\"getMunicipal_query_all\")\r\n                .setRequestType(\"get\")\r\n                .setOkHttpLo(new OkHttpLo() {\r\n                    @Override\r\n                    public void onResponse(JSONObject jsonObject) {\r\n                        getMunicipalqueryalls=new Gson().fromJson(jsonObject.optJSONArray(\"data\").toString()\r\n                        ,new TypeToken<List<GetMunicipalqueryall>>(){}.getType());\r\n                        for (GetStudentqueryall s:getStudentqueryalls){\r\n                            for (GetMunicipalqueryall m:getMunicipalqueryalls){\r\n                                if (s.getMunicipalId().equals(m.getId())){\r\n                                    for (Provincequeryall p:provincequeryalls){\r\n                                       if (m.getProvinceId().equals(p.getProvinceId())){\r\n                                           String sheng=p.getProvinceName();\r\n                                           Float count=studentadress.get(sheng);\r\n                                           studentadress.put(sheng,(count==null)?1:count+1);\r\n                                       }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        for (Provincequeryall p:provincequeryalls){\r\n                          if (studentadress.get(p.getProvinceName())==null){\r\n\r\n                          }else {\r\n                              float zongshu=studentadress.get(p.getProvinceName())/getStudentqueryalls.size();\r\n                              studentadress.put(p.getProvinceName(),zongshu);\r\n                          }\r\n\r\n                        }\r\n                        //设置颜色渐变条\r\n                        setColorView();\r\n                        initRecycleView();\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onFailure(IOException e) {\r\n\r\n                    }\r\n                }).start();\r\n    }\r\n\r\n    private void huoqu() {\r\n        student1 = new HashMap<>();\r\n        int x = 0;\r\n        int q = 0;\r\n        int s1 = 0;\r\n        int s2 = 0;\r\n        int w = 0;\r\n        for (GetStudentqueryall s : getStudentqueryalls) {\r\n            switch (s.getWordNatureId()) {\r\n                case \"1\":\r\n                    x++;\r\n                    break;\r\n                case \"2\":\r\n                    q++;\r\n                    break;\r\n                case \"3\":\r\n                    s1++;\r\n                    break;\r\n                case \"4\":\r\n                    s2++;\r\n                    break;\r\n                case \"5\":\r\n                    w++;\r\n                    break;\r\n            }\r\n        }\r\n        student1.put(\"行政\", x);\r\n        student1.put(\"企业\", q);\r\n        student1.put(\"事业\", s1);\r\n        student1.put(\"升学\", s2);\r\n        student1.put(\"未就业\", w);\r\n        setView();\r\n    }\r\n\r\n    private void getWorkNatureName_query_all() {\r\n        new OkHttpTo().setUrl(\"getWorkNatureName_query_all\")\r\n                .setRequestType(\"get\")\r\n                .setOkHttpLo(new OkHttpLo() {\r\n                    @Override\r\n                    public void onResponse(JSONObject jsonObject) {\r\n                        getWorkNatureNamequeryalls = new Gson().fromJson(jsonObject.optJSONArray(\r\n                                \"data\").toString(), new TypeToken<List<GetWorkNatureNamequeryall>>() {\r\n                        }.getType());\r\n                        if (getWorkNatureNamequeryalls != null) {\r\n                            getStudentqueryalls();\r\n\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onFailure(IOException e) {\r\n\r\n                    }\r\n                }).start();\r\n    }\r\n\r\n    private void setView() {\r\n        //以百分比绘制\r\n        chart1.setUsePercentValues(true);\r\n        chart1.getDescription().setEnabled(false);\r\n        //偏移量\r\n        chart1.setExtraOffsets(5, 10, 5, 5);\r\n\r\n        chart1.setDragDecelerationFrictionCoef(0.95f);\r\n        //字体设置\r\n        tf = Typeface.createFromAsset(getActivity().getAssets(), \"OpenSans-Regular.ttf\");\r\n        //设置显示在Piechart中心的文本字符串\r\n        chart1.setCenterText(generateCenerSpannableText());\r\n\r\n        chart1.setExtraOffsets(20.f, 0.f, 20.f, 0.f);\r\n        //饼图中心是否为空\r\n        chart1.setDrawHoleEnabled(true);\r\n        //设置透明圆应有的颜色\r\n        chart1.setTransparentCircleColor(Color.WHITE);\r\n        //设置透明度\r\n        chart1.setTransparentCircleAlpha(110);\r\n        //设置中心圆的半径，以整个图的百分比来设置，默认50%\r\n        chart1.setHoleRadius(58f);\r\n        //设置中心透明圆的半径\r\n        chart1.setTransparentCircleRadius(61f);\r\n        //是否绘制显示在中间的文本\r\n        chart1.setDrawCenterText(true);\r\n        //设置旋转的偏移度\r\n        chart1.setRotationAngle(0);\r\n        //enable rotation of the chart by touch\r\n        //通过触摸启动图标旋转\r\n        chart1.setRotationEnabled(true);\r\n        chart1.setHighlightPerTapEnabled(true);\r\n\r\n        //chart.setUnit(\"€\")\r\n        //chart.setDrawUnitsInChart(true);\r\n\r\n        //add a selection listener\r\n        //设置图表监听\r\n        chart1.setOnChartValueSelectedListener(this);\r\n\r\n//        chart1.animateY(1400, Easing.EaseInOutQuad);\r\n\r\n        Legend legend = chart1.getLegend();\r\n        legend.setVerticalAlignment(Legend.LegendVerticalAlignment.TOP);\r\n        legend.setHorizontalAlignment(Legend.LegendHorizontalAlignment.RIGHT);\r\n        legend.setOrientation(Legend.LegendOrientation.VERTICAL);\r\n        //设置在图例的表内还是表外\r\n        legend.setDrawInside(false);\r\n        legend.setEnabled(false);\r\n        setData();\r\n\r\n    }\r\n\r\n\r\n    private void setData() {\r\n\r\n        ArrayList<PieEntry> entries = new ArrayList<>();\r\n\r\n        for (GetWorkNatureNamequeryall w : getWorkNatureNamequeryalls) {\r\n            entries.add(new PieEntry(student1.get(w.getWorkNatureName()), w.getWorkNatureName()));\r\n        }\r\n        PieDataSet dataSet = new PieDataSet(entries, \"Election Results\");\r\n        dataSet.setSliceSpace(3f);\r\n        dataSet.setSelectionShift(5f);\r\n        ArrayList<Integer> colors = new ArrayList<>();\r\n        for (int c : ColorTemplate.VORDIPLOM_COLORS)\r\n            colors.add(c);\r\n\r\n        for (int c : ColorTemplate.JOYFUL_COLORS)\r\n            colors.add(c);\r\n\r\n        for (int c : ColorTemplate.COLORFUL_COLORS)\r\n            colors.add(c);\r\n\r\n        for (int c : ColorTemplate.LIBERTY_COLORS)\r\n            colors.add(c);\r\n\r\n        for (int c : ColorTemplate.PASTEL_COLORS)\r\n            colors.add(c);\r\n        colors.add(ColorTemplate.getHoloBlue());\r\n        dataSet.setColors(colors);\r\n        dataSet.setValueLinePart1OffsetPercentage(80.f);\r\n        dataSet.setValueLinePart1Length(0.2f);\r\n        dataSet.setValueLinePart2Length(0.4f);\r\n        //dataSet.setXValuePosition(PieDataSet.ValuePosition.OUTSIDE_SLICE);\r\n        dataSet.setYValuePosition(PieDataSet.ValuePosition.OUTSIDE_SLICE);\r\n\r\n        PieData data = new PieData(dataSet);\r\n        data.setValueFormatter(new PercentFormatter());\r\n        //为该数据对象的所有数据集设置文本大小的（dp）包含\r\n        data.setValueTextSize(11f);\r\n        //为该对象所有数据集设置颜色\r\n        data.setValueTextColor(Color.BLACK);\r\n        //标签字体\r\n        data.setValueTypeface(tf);\r\n        chart1.setData(data);\r\n\r\n        //undo all highlights\r\n        //撤销所有高亮\r\n        chart1.highlightValues(null);\r\n        chart1.invalidate();\r\n\r\n    }\r\n\r\n    private CharSequence generateCenerSpannableText() {\r\n        SpannableString s = new SpannableString(\"岗位性质统计\");\r\n        s.setSpan(new RelativeSizeSpan(1.5f), 0, 6, 0);/*\r\n        s.setSpan(new StyleSpan(Typeface.NORMAL), 14, s.length() - 15, 0);\r\n        s.setSpan(new ForegroundColorSpan(Color.GRAY), 14, s.length() - 15, 0);\r\n        s.setSpan(new RelativeSizeSpan(.65f), 14, s.length() - 15, 0);\r\n        s.setSpan(new StyleSpan(Typeface.ITALIC), s.length() - 14, s.length(), 0);\r\n        s.setSpan(new ForegroundColorSpan(ColorTemplate.getHoloBlue()), s.length() - 14, s.length(), 0);*/\r\n        return s;\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onValueSelected(Entry e, Highlight h) {\r\n        if (e == null) {\r\n            return;\r\n        }\r\n        Log.i(\"VAL SELECTED\",\r\n                \"Value: \" + e.getY() + \", xIndex: \" + e.getX()\r\n                        + \", DataSet index: \" + h.getDataSetIndex());\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onNothingSelected() {\r\n        Log.i(\"PieChart\", \"nothing selected\");\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/smartcampus/fragment/statisticsFragment/Fragment_getAJob1.java	(revision 14ad90597f23d76bf08b2a153622a9d9a82d7123)
+++ app/src/main/java/com/example/smartcampus/fragment/statisticsFragment/Fragment_getAJob1.java	(date 1624848784782)
@@ -16,7 +16,6 @@
 import com.example.smartcampus.bean.statistics.GetMunicipalqueryall;
 import com.example.smartcampus.bean.statistics.GetStudentqueryall;
 import com.example.smartcampus.bean.statistics.GetWorkNatureNamequeryall;
-import com.example.smartcampus.bean.statistics.Province;
 import com.example.smartcampus.bean.statistics.Provincequeryall;
 import com.example.smartcampus.listener.AppBarLayoutStateChangeListener;
 import com.example.smartcampus.model.MycolorArea;
@@ -25,14 +24,28 @@
 import com.example.smartcampuslibrary.fragment.BaseFragment;
 import com.example.smartcampuslibrary.net.OkHttpLo;
 import com.example.smartcampuslibrary.net.OkHttpTo;
+import com.github.mikephil.charting.charts.BarChart;
+import com.github.mikephil.charting.charts.LineChart;
 import com.github.mikephil.charting.charts.PieChart;
+import com.github.mikephil.charting.components.AxisBase;
 import com.github.mikephil.charting.components.Legend;
+import com.github.mikephil.charting.components.XAxis;
+import com.github.mikephil.charting.components.YAxis;
+import com.github.mikephil.charting.data.BarData;
+import com.github.mikephil.charting.data.BarDataSet;
+import com.github.mikephil.charting.data.BarEntry;
 import com.github.mikephil.charting.data.Entry;
+import com.github.mikephil.charting.data.LineData;
+import com.github.mikephil.charting.data.LineDataSet;
 import com.github.mikephil.charting.data.PieData;
 import com.github.mikephil.charting.data.PieDataSet;
 import com.github.mikephil.charting.data.PieEntry;
+import com.github.mikephil.charting.formatter.IAxisValueFormatter;
+import com.github.mikephil.charting.formatter.IndexAxisValueFormatter;
 import com.github.mikephil.charting.formatter.PercentFormatter;
 import com.github.mikephil.charting.highlight.Highlight;
+import com.github.mikephil.charting.interfaces.datasets.IBarDataSet;
+import com.github.mikephil.charting.interfaces.datasets.ILineDataSet;
 import com.github.mikephil.charting.listener.OnChartValueSelectedListener;
 import com.github.mikephil.charting.utils.ColorTemplate;
 import com.google.android.material.appbar.AppBarLayout;
@@ -45,6 +58,7 @@
 import org.json.JSONObject;
 
 import java.io.IOException;
+import java.text.DecimalFormat;
 import java.util.ArrayList;
 import java.util.HashMap;
 import java.util.List;
@@ -82,7 +96,10 @@
 
     private List<Provincequeryall> provincequeryalls;//获取省
     private List<GetMunicipalqueryall> getMunicipalqueryalls;//获取市
-    private Map<String,Float> studentadress;
+    private Map<String, Float> studentadress;
+    private LineChart chart2;
+    private BarChart chart3;
+    private BarChart chart4;
 
     @Override
     protected int layoutResId() {
@@ -102,24 +119,32 @@
         swipe = (SwipeRefreshLayout) view.findViewById(R.id.swipe);
         appbarLayout = (AppBarLayout) view.findViewById(R.id.appbar_layout);
         btnChange = (Button) view.findViewById(R.id.btn_change);
+
+        chart2 = (LineChart) view.findViewById(R.id.chart2);
+        chart3 = (BarChart) view.findViewById(R.id.chart3);
+        chart4 = (BarChart) view.findViewById(R.id.chart4);
     }
 
     @Override
     protected void initData() {
         title.setText("学业信息");
-        provincequeryalls=new ArrayList<>();
+        provincequeryalls = new ArrayList<>();
         getWorkNatureName_query_all();
-
         //初始化map
         initMap();
+        btnChange.setText("就业地市显示");
 
-        //初始化地图颜色
-        intMapColor();
-        initAppbarListener();
-        initSwipRefresh();
+
         btnChange.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View v) {
+                if (btnChange.getText().equals("就业地市显示")) {
+                    btnChange.setText("岗位性质统计");
+                    swipe.setVisibility(View.GONE);
+                } else {
+                    btnChange.setText("就业地市显示");
+                    swipe.setVisibility(View.VISIBLE);
+                }
               /*  String namestring = ColorChangeUtil.nameStrings[++currentColor % ColorChangeUtil.nameStrings.length];
                 btnChange.setText(namestring);
                 colorView.setList(colorView_hashmap.get(namestring));
@@ -129,6 +154,7 @@
             }
         });
     }
+
     private void initSwipRefresh() {
         swipe.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {
             @Override
@@ -184,33 +210,44 @@
 
     private void intMapColor() {
 
-      /*  String colorStrings[] = {"#D50D0D,#DC5754,#E98683,#F8CECF,#D3DFD5,#8DB093,#5E9361,#1C6620"};
+        String colorStrings[] = {"#D50D0D,#DC5754,#E98683,#F8CECF,#D3DFD5,#8DB093,#5E9361,#1C6620"};
         String textStrings[] = {"0~0.5,0.5~1,1~1.5,1.5~2,2~2.5,2.5~3,3~3.5,3.5~"};
-        for (ProvinceModel p:chinaMapModel.getProvincesList()){
-            for (Provincequeryall p1:provincequeryalls){
-             float  a= studentadress.get(p1.getProvinceName())*100;
-             int b=(int)((a-0)/2+1);
-                if (b<=0){
-                    b=0;
-                }else if (b>=textStrings[0].split(",").length-1){
-                    b=textStrings[0].split(",").length-1;
+        float a = 0;
+        for (ProvinceModel p : chinaMapModel.getProvincesList()) {
+            for (Provincequeryall p1 : provincequeryalls) {
+                if (p1.getProvinceName().contains(p.getName())) {
+                    if (studentadress.get(p1.getProvinceName()) == null) {
+                    } else {
+                        a = studentadress.get(p1.getProvinceName()) * 100;
+                    }
+
+                    int b = (int) ((a - 0.5) / 0.5 + 1);
+                    Log.d("aaaaaaaa", "intMapColor: " + a + "/" + b);
+                    if (b <= 0) {
+                        b = 0;
+                    } else if (b >= textStrings[0].split(",").length - 1) {
+                        b = textStrings[0].split(",").length - 1;
+                    }
+                    p.setColor(Color.parseColor(colorStrings[0].split(",")[b]));
+                    chinamapView.notifyDataChanged();
                 }
+
 
             }
 
         }
 
-        }*/
-        btnChange.setText("就业地市显示");
+    }
+     /*
         ColorChangeUtil.changeMapColors(chinaMapModel, ColorChangeUtil.nameStrings[currentColor]);
-        chinamapView.notifyDataChanged();
-    }
+        chinamapView.notifyDataChanged();*/
+
     private void initRecycleView() {
       /*  list = new ArrayList<>();
         for (int i = 0; i < ColorChangeUtil.province_datas.length; i++) {
             list.add(ColorChangeUtil.province_datas[i]);
         }*/
-        adapter = new ProvinceAdapter(studentadress,provincequeryalls);
+        adapter = new ProvinceAdapter(studentadress, provincequeryalls);
         recycle.setLayoutManager(new LinearLayoutManager(getContext(), LinearLayoutManager.VERTICAL, false));
         recycle.setAdapter(adapter);
     }
@@ -234,29 +271,30 @@
         }
         colorView.setList(colorView_hashmap.get(ColorChangeUtil.nameStrings[0]));
     }
+
     private void initMap() {
         chinaMapModel = chinamapView.getChinaMapModel();
         //传数据
         chinamapView.setScaleMax(3);
         chinamapView.setScaleMin(1);
-        chinamapView.setOnProvinceClickLisener(new com.wxy.chinamapview.view.ChinaMapView.onProvinceClickLisener() {
+        chinamapView.setOnProvinceClickLisener(new ChinaMapView.onProvinceClickLisener() {
             @Override
             public void onSelectProvince(String provinceName) {
 
                 for (int i = 0; i < provincequeryalls.size(); i++) {
 
                     if (provincequeryalls.get(i).getProvinceName().contains(provinceName)) {
-                        Log.d("aaaaaaaax", "onSelectProvince: "+provinceName+"/"+provincequeryalls.get(i).getProvinceName());
+                        Log.d("aaaaaaaax", "onSelectProvince: " + provinceName + "/" + provincequeryalls.get(i).getProvinceName());
                         Provincequeryall p = provincequeryalls.get(i);
                         provincequeryalls.remove(i);
-                        provincequeryalls.add(0,p);
+                        provincequeryalls.add(0, p);
                         adapter.notifyDataSetChanged();
                         break;
                     }
                 }
             }
         });
-        chinamapView.setOnPromiseParentTouchListener(new com.wxy.chinamapview.view.ChinaMapView.onPromiseParentTouchListener() {
+        chinamapView.setOnPromiseParentTouchListener(new ChinaMapView.onPromiseParentTouchListener() {
             @Override
             public void onPromiseTouch(boolean promise) {
                 swipe.setEnabled(promise);
@@ -309,8 +347,9 @@
                     @Override
                     public void onResponse(JSONObject jsonObject) {
                         provincequeryalls.addAll(new Gson().fromJson(jsonObject.optJSONArray("data").toString()
-                                ,new TypeToken<List<Provincequeryall>>(){}.getType()));
-                        if (provincequeryalls.size()!=0){
+                                , new TypeToken<List<Provincequeryall>>() {
+                                }.getType()));
+                        if (provincequeryalls.size() != 0) {
                             huoqushi();
                         }
                     }
@@ -323,40 +362,44 @@
     }
 
     private void huoqushi() {
-        studentadress=new HashMap<>();
+        studentadress = new HashMap<>();
         new OkHttpTo().setUrl("getMunicipal_query_all")
                 .setRequestType("get")
                 .setOkHttpLo(new OkHttpLo() {
                     @Override
                     public void onResponse(JSONObject jsonObject) {
-                        getMunicipalqueryalls=new Gson().fromJson(jsonObject.optJSONArray("data").toString()
-                        ,new TypeToken<List<GetMunicipalqueryall>>(){}.getType());
-                        for (GetStudentqueryall s:getStudentqueryalls){
-                            for (GetMunicipalqueryall m:getMunicipalqueryalls){
-                                if (s.getMunicipalId().equals(m.getId())){
-                                    for (Provincequeryall p:provincequeryalls){
-                                       if (m.getProvinceId().equals(p.getProvinceId())){
-                                           String sheng=p.getProvinceName();
-                                           Float count=studentadress.get(sheng);
-                                           studentadress.put(sheng,(count==null)?1:count+1);
-                                       }
+                        getMunicipalqueryalls = new Gson().fromJson(jsonObject.optJSONArray("data").toString()
+                                , new TypeToken<List<GetMunicipalqueryall>>() {
+                                }.getType());
+                        for (GetStudentqueryall s : getStudentqueryalls) {
+                            for (GetMunicipalqueryall m : getMunicipalqueryalls) {
+                                if (s.getMunicipalId().equals(m.getId())) {
+                                    for (Provincequeryall p : provincequeryalls) {
+                                        if (m.getProvinceId().equals(p.getProvinceId())) {
+                                            String sheng = p.getProvinceName();
+                                            Float count = studentadress.get(sheng);
+                                            studentadress.put(sheng, (count == null) ? 1 : count + 1);
+                                        }
                                     }
                                 }
                             }
                         }
-                        for (Provincequeryall p:provincequeryalls){
-                          if (studentadress.get(p.getProvinceName())==null){
+                        for (Provincequeryall p : provincequeryalls) {
+                            if (studentadress.get(p.getProvinceName()) == null) {
 
-                          }else {
-                              float zongshu=studentadress.get(p.getProvinceName())/getStudentqueryalls.size();
-                              studentadress.put(p.getProvinceName(),zongshu);
-                          }
+                            } else {
+                                float zongshu = studentadress.get(p.getProvinceName()) / getStudentqueryalls.size();
+                                studentadress.put(p.getProvinceName(), zongshu);
+                            }
 
                         }
                         //设置颜色渐变条
                         setColorView();
                         initRecycleView();
-
+                        //初始化地图颜色
+                        intMapColor();
+                        initAppbarListener();
+                        initSwipRefresh();
                     }
 
                     @Override
@@ -397,9 +440,222 @@
         student1.put("事业", s1);
         student1.put("升学", s2);
         student1.put("未就业", w);
-        setView();
+        setView();//饼图
+        setView2();//折线图
+        setView3();//柱状图
+        setView4();
     }
+
+    private void setView4() {
+        chart4.getDescription().setEnabled(false);        //不展示图表描述信息
+        //所有值均绘制在其条形顶部上方
+        chart4.setDrawValueAboveBar(false);
+        //纵坐标不显示网格线
+        chart4.getXAxis().setDrawGridLines(false);
+        //不支持图表缩放
+        chart4.setScaleEnabled(false);
+        //设置点击图表时的标记，可以自定义布局
+//        barChartPileUp.setMarker(new MyMarkView(context);
+
+        // 改变y标签的位置
+        YAxis leftAxis = chart4.getAxisLeft();
+        leftAxis.setAxisMinimum(0f);
+        //右y轴不显示
+        chart4.getAxisRight().setEnabled(false);
+        leftAxis.setDrawAxisLine(false);
+        leftAxis.setMaxWidth(100);
+        //获取x坐标轴
+        XAxis xLabels = chart4.getXAxis();
+        //设置x坐标轴显示位置在下方
+        xLabels.setPosition(XAxis.XAxisPosition.BOTTOM);
+        //转换x坐标轴显示内容
+        xLabels.setValueFormatter(new IAxisValueFormatter() {
+            @Override
+            public String getFormattedValue(float value, AxisBase axis) {
+                return "";
+            }
+        });
+
+        //获取图表的图例
+        Legend l = chart4.getLegend();
+        //图例设置在下方
+        l.setVerticalAlignment(Legend.LegendVerticalAlignment.BOTTOM);
+        //图例设置在中间
+        l.setHorizontalAlignment(Legend.LegendHorizontalAlignment.CENTER);
+        l.setOrientation(Legend.LegendOrientation.HORIZONTAL);
+        l.setTextSize(18);
+        l.setFormSize(18);
+        l.setDrawInside(false);
+
+        ArrayList<BarEntry> yValues = new ArrayList<>();
+
+        yValues.add(new BarEntry(0, new float[]{(float) (student1.get(getWorkNatureNamequeryalls.get(0).getWorkNatureName())), (float) (student1.get(getWorkNatureNamequeryalls.get(1).getWorkNatureName()))
+        ,(float) (student1.get(getWorkNatureNamequeryalls.get(2).getWorkNatureName())),(float) (student1.get(getWorkNatureNamequeryalls.get(3).getWorkNatureName()))
+        ,(float) (student1.get(getWorkNatureNamequeryalls.get(4).getWorkNatureName()))}));
+
+        BarDataSet set1;
+
+        if (chart4.getData() != null && chart4.getData().getDataSetCount() > 0) {
+            set1 = (BarDataSet) chart4.getData().getDataSetByIndex(0);
+            set1.setValues(yValues);
+            chart4.getData().notifyDataChanged();
+            chart4.notifyDataSetChanged();
+        } else {
+            set1 = new BarDataSet(yValues, "");
+            set1.setValueTextSize(20);
+            set1.setValueFormatter((value, entry, dataSetIndex, viewPortHandler) -> {
+                DecimalFormat format = new DecimalFormat("0");
+                return format.format(value) ;
+            });
+            //设置图例的颜色和名称
+            set1.setColors(new int[]{R.color.design_default_color_secondary, R.color.drawing_nv,R.color.blue_title,R.color.design_default_color_secondary_variant,R.color.design_default_color_error}, getContext());
+            set1.setStackLabels(new String[]{getWorkNatureNamequeryalls.get(0).getWorkNatureName(),
+                    getWorkNatureNamequeryalls.get(1).getWorkNatureName(),
+                    getWorkNatureNamequeryalls.get(2).getWorkNatureName(),
+                    getWorkNatureNamequeryalls.get(3).getWorkNatureName(),
+                    getWorkNatureNamequeryalls.get(4).getWorkNatureName()});
+
+            ArrayList<IBarDataSet> dataSets = new ArrayList<>();
+            dataSets.add(set1);
+
+            BarData data = new BarData(dataSets);
+            data.setValueTextColor(Color.WHITE);
+
+            chart4.setData(data);
+        }
+        chart4.animateXY(0, 2000);
+        chart4.setFitBars(true);
+        chart4.setTouchEnabled(false);                   //禁用触摸
+        chart4.invalidate();
+
+    }
+
+    private List<BarEntry> barEntries;
+    private List<String> stringSex;
+    private void setView3() {
+        if (barEntries == null) {
+            barEntries = new ArrayList<>();
+            stringSex = new ArrayList<>();
+        } else {
+            barEntries.clear();
+            stringSex.clear();
+        }
+
+
+        for (int i=0;i<getWorkNatureNamequeryalls.size();i++){
+            GetWorkNatureNamequeryall w= getWorkNatureNamequeryalls.get(i);
+            barEntries.add(new BarEntry(i, student1.get(w.getWorkNatureName())));
+            stringSex.add(w.getWorkNatureName());
+        }
+
+        BarDataSet barDataSet = new BarDataSet(barEntries, "");
+
+        barDataSet.setColor(Color.parseColor("#20D5CE"));
+        BarData data = new BarData(barDataSet);
+        barDataSet.setValueTextSize(18);            //设置大小
+        barDataSet.setValueTextColor(Color.parseColor("#404040"));
+        barDataSet.setValueFormatter((value, entry, dataSetIndex, viewPortHandler) -> {
+            DecimalFormat format = new DecimalFormat("0");
+            return format.format(value);
+        });
+        data.setBarWidth(0.5f);
+
+        chart3.getLegend().setEnabled(false);
+
+        YAxis yAxis = chart3.getAxisLeft();
+        yAxis.setDrawAxisLine(false);                    //关闭Y轴网格线
+        yAxis.setAxisMinimum(0);                        //最小值
+        yAxis.setAxisMaximum(500);                        //最大值
+
+        XAxis xAxis = chart3.getXAxis();
+        xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);    //X轴在底部显示
+        xAxis.setValueFormatter(new IndexAxisValueFormatter(stringSex));    //将每秒显示的数据放到X轴
+        xAxis.setLabelCount(stringSex.size());            //标签个数
+        xAxis.setGranularity(1f);
+        xAxis.setTextSize(20);
+        //两个数之间的间距
+        xAxis.setDrawGridLines(false);                    //关闭网格线
+
+        barDataSet.setColors(Color.parseColor("#22D5CE"), Color.parseColor("#F39444"));
+
+        chart3.animateXY(0, 2000);
+        chart3.setFitBars(true);
+        chart3.getAxisRight().setEnabled(false);         //关闭右边线和数据
+        chart3.setData(data);                            //数据集合
+        chart3.setTouchEnabled(false);                   //禁用触摸
+        chart3.getDescription().setEnabled(false);       //关闭右下角
+        chart3.invalidate();
+    }
+
+    private List<Entry> entries;
+    private List<String> stringLine;
+
+    private void setView2() {
+        if (entries == null) {
+            entries = new ArrayList<>();
+            stringLine = new ArrayList<>();
+        } else {
+            entries.clear();
+            stringLine.clear();
+        }
+
+
+        for (int i=0;i<getWorkNatureNamequeryalls.size();i++){
+            GetWorkNatureNamequeryall w= getWorkNatureNamequeryalls.get(i);
+            entries.add(new Entry(i,student1.get(w.getWorkNatureName())));
+            Log.d("aaaaaaaaaax", "setView2: "+student1.get(w.getWorkNatureName()));
+            stringLine.add(w.getWorkNatureName());
+        }
 
+
+        LineDataSet dataSet = new LineDataSet(entries, "");  //单数据存入
+
+        dataSet.setCircleColor(Color.parseColor("#F39445"));                 //设置外圈颜色
+        dataSet.setCircleHoleRadius(3f);                    //内圈半径
+        dataSet.setColor(Color.parseColor("#20D5CE"));                       //绘制线条颜色
+        dataSet.setValueTextSize(20);                       //显示数字大小
+        dataSet.setLineWidth(4f);                           //线条宽度
+        dataSet.setDrawValues(false);                       //关闭图中显示数字
+        dataSet.setDrawCircleHole(false);                   //关闭标识线，垂直显示的
+        dataSet.setValueFormatter((value, entry, dataSetIndex, viewPortHandler) -> {
+            DecimalFormat format = new DecimalFormat("0");
+            return format.format(value) + "%";
+        });
+        LineData lineData = new LineData(dataSet);
+
+        YAxis yAxis = chart2.getAxisLeft();
+        yAxis.setDrawAxisLine(false);                    //关闭Y轴网格线
+        yAxis.setAxisMinimum(0);                        //最小值
+        yAxis.setAxisMaximum(500);                        //最大值
+
+        XAxis xAxis = chart2.getXAxis();
+        xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);    //X轴在底部显示
+        xAxis.setValueFormatter(new IndexAxisValueFormatter(stringLine));    //将每秒显示的数据放到X轴
+        xAxis.setLabelCount(stringLine.size());            //标签个数
+        xAxis.setGranularity(1f);
+        xAxis.setTextSize(20);
+        //两个数之间的间距
+        xAxis.setDrawGridLines(false);                    //关闭网格线
+
+        chart2.setData(lineData);
+        chart2.getLegend().setEnabled(false);
+        chart2.animateXY(1500, 1000);                    //动画效果
+        chart2.getDescription().setEnabled(false);       //说明关闭
+        chart2.getDescription().setText("(S)");          //右下角说明打开
+        chart2.setScaleEnabled(false);                   //禁用缩放比例
+        chart2.setTouchEnabled(false);                   //禁用触摸
+        chart2.invalidate();                             //刷新
+
+
+    }
+
+
+
+    private final int[] colors = new int[] {
+            ColorTemplate.VORDIPLOM_COLORS[0],
+            ColorTemplate.VORDIPLOM_COLORS[1],
+            ColorTemplate.VORDIPLOM_COLORS[2]
+    };
     private void getWorkNatureName_query_all() {
         new OkHttpTo().setUrl("getWorkNatureName_query_all")
                 .setRequestType("get")
Index: app/src/main/java/com/example/smartcampus/bean/statistics/ChartItem.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/smartcampus/bean/statistics/ChartItem.java	(date 1624843677527)
+++ app/src/main/java/com/example/smartcampus/bean/statistics/ChartItem.java	(date 1624843677527)
@@ -0,0 +1,23 @@
+package com.example.smartcampus.bean.statistics;
+
+import android.content.Context;
+import android.view.View;
+
+import com.github.mikephil.charting.data.ChartData;
+
+public abstract class ChartItem {
+
+    static final int TYPE_BARCHART = 0;
+    static final int TYPE_LINECHART = 1;
+    static final int TYPE_PIECHART = 2;
+
+    ChartData<?> mChartData;
+
+    ChartItem(ChartData<?> cd) {
+        this.mChartData = cd;
+    }
+
+    public abstract int getItemType();
+
+    public abstract View getView(int position, View convertView, Context c);
+}
Index: .idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"GRADLE\" />\r\n        <option name=\"distributionType\" value=\"DEFAULT_WRAPPED\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"1.8\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/SmartCampuslibrary\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n            <option value=\"$PROJECT_DIR$/gestureviewbinder\" />\r\n          </set>\r\n        </option>\r\n        <option name=\"resolveModulePerSourceSet\" value=\"false\" />\r\n        <option name=\"useQualifiedModuleNames\" value=\"true\" />\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/gradle.xml	(revision 14ad90597f23d76bf08b2a153622a9d9a82d7123)
+++ .idea/gradle.xml	(date 1624838720435)
@@ -4,7 +4,7 @@
   <component name="GradleSettings">
     <option name="linkedExternalProjectsSettings">
       <GradleProjectSettings>
-        <option name="testRunner" value="GRADLE" />
+        <option name="testRunner" value="PLATFORM" />
         <option name="distributionType" value="DEFAULT_WRAPPED" />
         <option name="externalProjectPath" value="$PROJECT_DIR$" />
         <option name="gradleJvm" value="1.8" />
@@ -17,7 +17,6 @@
           </set>
         </option>
         <option name="resolveModulePerSourceSet" value="false" />
-        <option name="useQualifiedModuleNames" value="true" />
       </GradleProjectSettings>
     </option>
   </component>
